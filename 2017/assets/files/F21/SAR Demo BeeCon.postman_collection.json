{
	"variables": [],
	"info": {
		"name": "SAR Demo BeeCon",
		"_postman_id": "6c8c5ce2-7543-fed9-bda9-351f376fabab",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "00 - Set up",
			"description": "",
			"item": [
				{
					"name": "Reset: (Delete RM site)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 204\"] = responseCode.code === 204;"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/gs-sites/{{ig.site.id}}",
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"description": "Delete GS Site"
					},
					"response": []
				},
				{
					"name": "Create site",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/gs-sites",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"OxSAR Records\",\n  \"description\": \"Records generated by Oxfordshire Lowland Rescue\"\n}"
						},
						"description": "Create RM Site"
					},
					"response": []
				},
				{
					"name": "Create Call Outs Category",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.root.category.id\", jsonData.entry.id);"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/file-plans/{{ig.fileplan.alias}}/categories",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\":\"Call Outs\"\n}"
						},
						"description": "Create Record Category"
					},
					"response": []
				}
			]
		},
		{
			"name": "01 - Incoming Call from Police",
			"description": "",
			"item": [
				{
					"name": "Create Sub category for call",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.subcategory.id\", jsonData.entry.id);"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-categories/{{ig.root.category.id}}/children",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\":\"20170428-001\",\n  \"nodeType\":\"rma:recordCategory\"\n}"
						},
						"description": "Create Record Category"
					},
					"response": []
				},
				{
					"name": "Create folder for call log",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.call.log.folder.id\", jsonData.entry.id);"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-categories/{{ig.subcategory.id}}/children",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\":\"incoming call logs\",\n  \"nodeType\":\"rma:recordFolder\"\n}"
						},
						"description": "Create Record Folder"
					},
					"response": []
				},
				{
					"name": "Upload call log",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.electronic.record.id\", jsonData.entry.id);",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-folders/{{ig.call.log.folder.id}}/records",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Call Log",
									"type": "text",
									"enabled": true
								},
								{
									"key": "nodeType",
									"value": "cm:content",
									"type": "text",
									"enabled": true
								},
								{
									"key": "filedata",
									"type": "file",
									"enabled": true,
									"src": "incoming-call-log.csv"
								}
							]
						},
						"description": "File Non-Electronic Record in folder"
					},
					"response": []
				}
			]
		},
		{
			"name": "02 - Initial Brief",
			"description": "",
			"item": [
				{
					"name": "Create folder for misper details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.misper.details.folder.id\", jsonData.entry.id);"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-categories/{{ig.subcategory.id}}/children",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\":\"Misper details\",\n  \"nodeType\":\"rma:recordFolder\"\n}"
						},
						"description": "Create Record Folder"
					},
					"response": []
				},
				{
					"name": "Upload misper details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.electronic.record.id\", jsonData.entry.id);",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-folders/{{ig.misper.details.folder.id}}/records",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Misper Details",
									"type": "text",
									"enabled": true
								},
								{
									"key": "nodeType",
									"value": "cm:content",
									"type": "text",
									"enabled": true
								},
								{
									"key": "filedata",
									"type": "file",
									"enabled": true,
									"src": "misper-brief.txt"
								}
							]
						},
						"description": "File Non-Electronic Record in folder"
					},
					"response": []
				}
			]
		},
		{
			"name": "03 - Team Called Out",
			"description": "From personnel system to Alfresco - record of those who were called and those who responded.",
			"item": [
				{
					"name": "Create folder for call out log",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.messages.folder.id\", jsonData.entry.id);"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-categories/{{ig.subcategory.id}}/children",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\":\"Call Out Messages\",\n  \"nodeType\":\"rma:recordFolder\"\n}"
						},
						"description": "Create Record Folder"
					},
					"response": []
				},
				{
					"name": "Upload outgoing text message",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.electronic.record.id\", jsonData.entry.id);",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-folders/{{ig.messages.folder.id}}/records",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Outgoing message log",
									"type": "text",
									"enabled": true
								},
								{
									"key": "nodeType",
									"value": "cm:content",
									"type": "text",
									"enabled": true
								},
								{
									"key": "filedata",
									"type": "file",
									"enabled": true,
									"src": "outgoing-message-log.csv"
								}
							]
						},
						"description": "File Non-Electronic Record in folder"
					},
					"response": []
				},
				{
					"name": "Upload incoming message log",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.electronic.record.id\", jsonData.entry.id);",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-folders/{{ig.messages.folder.id}}/records",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Incoming Message Log",
									"type": "text",
									"enabled": true
								},
								{
									"key": "nodeType",
									"value": "cm:content",
									"type": "text",
									"enabled": true
								},
								{
									"key": "filedata",
									"type": "file",
									"enabled": true,
									"src": "incoming-message-log.csv"
								}
							]
						},
						"description": "File Non-Electronic Record in folder"
					},
					"response": []
				}
			]
		},
		{
			"name": "04 - Find Team Patient Report Form",
			"description": "",
			"item": [
				{
					"name": "upload PRF",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.electronic.record.id\", jsonData.entry.id);",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-folders/{{ig.misper.details.folder.id}}/records",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "prf",
									"type": "text",
									"enabled": true
								},
								{
									"key": "nodeType",
									"value": "cm:content",
									"type": "text",
									"enabled": true
								},
								{
									"key": "filedata",
									"type": "file",
									"enabled": true,
									"src": "PRF.pdf"
								}
							]
						},
						"description": "File Non-Electronic Record in folder"
					},
					"response": []
				}
			]
		},
		{
			"name": "05 - Finish search",
			"description": "Scan of paperwork.\nComplete records.",
			"item": [
				{
					"name": "Create folder for search paperwork",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.paperwork.folder.id\", jsonData.entry.id);"
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-categories/{{ig.subcategory.id}}/children",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\":\"Search Paperwork\",\n  \"nodeType\":\"rma:recordFolder\"\n}"
						},
						"description": "Create Record Folder"
					},
					"response": []
				},
				{
					"name": "upload scanned paperwork",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setGlobalVariable(\"ig.electronic.record.id\", jsonData.entry.id);",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{alfresco.protocol}}://{{alfresco.host}}:{{alfresco.port}}/alfresco/api/-default-/public/gs/versions/{{api.version}}/record-folders/{{ig.paperwork.folder.id}}/records",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"description": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "6 Step Paperwork",
									"type": "text",
									"enabled": true
								},
								{
									"key": "nodeType",
									"value": "cm:content",
									"type": "text",
									"enabled": true
								},
								{
									"key": "filedata",
									"type": "file",
									"enabled": true,
									"src": "6-step-paperwork.pdf"
								}
							]
						},
						"description": "File Non-Electronic Record in folder"
					},
					"response": []
				}
			]
		}
	]
}